<app-loader *ngIf="!isLoadingLayer"></app-loader>

<div class="container">
    <div class="row">
        <div class="updatePassword shadow rounded-5 p-5 my-4 w-50 mx-auto">
            <h3 class="h4 mb-3">Update Your Password :</h3>
            <form [formGroup]="updateUserPasswordForm" (ngSubmit)="updatePassword(updateUserPasswordForm)">
    
                <div *ngIf="apiMessage" class="alert alert-danger">
                    {{apiMessage}}
                </div>
    
                <div class="mt-3  position-relative">
                    <label for="currentPasswordInput">Current Password:</label>
                    <input formControlName="currentPassword" [type]="changeTypePass?'password':'text'" [id]="pass" class="form-control" />
                    <span class="eye-icon text-main position-absolute" (click)="viewPass(pass)">
                        <i [ngClass]="visiblePass?'fa-regular fa-eye':'fa-regular fa-eye-slash'"></i>
                    </span>
                    <div class="alert alert-danger mt-2 p-0" *ngIf="updateUserPasswordForm.get('currentPassword')?.touched && updateUserPasswordForm.get('currentPassword')?.errors">
                        <p class="p-1 m-0" *ngIf="updateUserPasswordForm.get('currentPassword')?.errors?.['required']">Input is required</p>
                        <p class="p-1 m-0" *ngIf="updateUserPasswordForm.get('currentPassword')?.errors?.['pattern']">Password must start with capital letter and min length is 6, max length 20</p>
                    </div>
                </div>
    
                <div class="mt-3  position-relative">
                    <label for="passwordInput">New Password:</label>
                    <input formControlName="password" [type]="changeTypeNewPass?'password':'text'" [id]="newPass" class="form-control" />
                    <span class="eye-icon text-main position-absolute" (click)="viewPass(newPass)">
                        <i [ngClass]="visibleNewPass?'fa-regular fa-eye':'fa-regular fa-eye-slash'"></i>
                    </span>
                    <div class="alert alert-danger mt-2 p-0" *ngIf="updateUserPasswordForm.get('password')?.touched && updateUserPasswordForm.get('password')?.errors">
                        <p class="p-1 m-0" *ngIf="updateUserPasswordForm.get('password')?.errors?.['required']">Input is required</p>
                        <p class="p-1 m-0" *ngIf="updateUserPasswordForm.get('password')?.errors?.['pattern']">Password must start with capital letter and min length is 6, max length 20</p>
                    </div>
                </div>
    
                <div class="mt-3  position-relative">
                    <label for="repasswordInput">re-Password:</label>
                    <input formControlName="rePassword" [type]="changeTypeReNewPass?'password':'text'" [id]="newRePass" class="form-control" />
                    <span class="eye-icon text-main position-absolute" (click)="viewPass(newRePass)">
                        <i [ngClass]="visibleReNewPass?'fa-regular fa-eye':'fa-regular fa-eye-slash'"></i>
                    </span>
                    <div class="alert alert-danger mt-2 p-0" *ngIf="updateUserPasswordForm.get('rePassword')?.touched && updateUserPasswordForm.get('rePassword')?.errors">
                        <p class="p-1 m-0" *ngIf="updateUserPasswordForm.get('rePassword')?.errors?.['required']">Input is required</p>
                        <p class="p-1 m-0" *ngIf="updateUserPasswordForm.get('rePassword')?.errors?.['rePasswordMatch']">re-Password does not match password</p>
                    </div>
                </div>

                <div class="d-flex justify-content-between mt-4">
                    <button class="btn bg-main text-white" [routerLink]="['/settings/accountSettings']">
                        <span >Go Back</span>
                        <!-- <i  class="fa fa-spinner fa-spin"></i> -->
                    </button>
                    <button class="btn bg-main text-white d-block ms-auto " [disabled]=" updateUserPasswordForm.invalid">
                        <span *ngIf="!isLoading"> Update Password</span>
                        <i *ngIf="isLoading" class="fa fa-spinner fa-spin"></i>
                    </button>
                </div>
    
            </form>
    
        </div>
    </div>
</div>